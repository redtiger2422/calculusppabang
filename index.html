<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>모험 퀴즈 게임</title>
  <style>
    /* 배경 음악 음소거 토글 버튼 스타일 */
    #muteBtn {
      position: fixed;
      top: 10px;
      right: 10px;
      font-size: 24px;
      background: none;
      border: none;
      cursor: pointer;
    }
    /* 퀴즈 화면 숨김 */
    #quizScreen {
      display: none;
    }
  </style>
</head>
<body>
  <!-- 배경 음악 (자동 재생, 무한 반복) -->
  <audio id="bgMusic" src="tayo1.mp3" loop autoplay></audio>
  <!-- 박수 효과음 -->
  <audio id="clapSound" src="applaus11.mp3"></audio>

  <!-- 상단 우측 음소거/소리 토글 버튼 -->
  <button id="muteBtn">🔊</button>

  <!-- 시작 화면 -->
  <div id="startScreen">
    <h1>모험 시작하기</h1>
    <label for="ageSelect">나이를 선택하세요: </label>
    <select id="ageSelect">
      <option value="5">5</option>
      <option value="6">6</option>
      <option value="7">7</option>
      <option value="8">8</option>
      <option value="9">9</option>
      <option value="10">10</option>
    </select>
    <button id="startBtn">모험 시작</button>
  </div>

  <!-- 퀴즈 화면 -->
  <div id="quizScreen">
    <h2 id="questionText"></h2>
    <input type="text" id="answerInput" placeholder="답을 입력하세요" />
    <button id="submitAnswer">제출</button>
    <p id="feedback"></p>
  </div>

  <script>
    // 문제 세트 예시 (나이에 따라 질문과 정답 설정)
    const questionSets = {
      '5': [
        { q: '1+1 = ?', a: '2' },
        { q: '2+3 = ?', a: '5' },
        { q: '5-2 = ?', a: '3' }
      ],
      '6': [
        { q: '3+4 = ?', a: '7' },
        { q: '6-2 = ?', a: '4' },
        { q: '5+5 = ?', a: '10' }
      ],
      '7': [
        { q: '3×2 = ?', a: '6' },
        { q: '7-2 = ?', a: '5' },
        { q: '4×2 = ?', a: '8' }
      ],
      '8': [
        { q: '4×2 = ?', a: '8' },
        { q: '10-5 = ?', a: '5' },
        { q: '6+7 = ?', a: '13' }
      ],
      '9': [
        { q: '3×3 = ?', a: '9' },
        { q: '12-4 = ?', a: '8' },
        { q: '5×5 = ?', a: '25' }
      ],
      '10': [
        { q: '5×3 = ?', a: '15' },
        { q: '20-9 = ?', a: '11' },
        { q: '7+8 = ?', a: '15' }
      ]
    };

    let currentQuestions = [];
    let currentIndex = 0;

    // 시작 버튼 이벤트 핸들러
    document.getElementById('startBtn').addEventListener('click', startGame);
    // 음소거 토글 버튼 이벤트 핸들러
    document.getElementById('muteBtn').addEventListener('click', function() {
      const bgMusic = document.getElementById('bgMusic');
      bgMusic.muted = !bgMusic.muted;
      this.textContent = bgMusic.muted ? '🔇' : '🔊';
    });
    // 정답 제출 버튼 이벤트 핸들러
    document.getElementById('submitAnswer').addEventListener('click', checkAnswer);

    function startGame() {
      // 선택한 나이 기반으로 문제 세트 설정
      const age = document.getElementById('ageSelect').value;
      currentQuestions = questionSets[age] || [];
      // 퀴즈 화면으로 전환
      document.getElementById('startScreen').style.display = 'none';
      document.getElementById('quizScreen').style.display = 'block';
      currentIndex = 0;
      document.getElementById('feedback').textContent = '';
      showQuestion();
    }

    function showQuestion() {
      if (currentIndex < currentQuestions.length) {
        const qObj = currentQuestions[currentIndex];
        document.getElementById('questionText').textContent = qObj.q;
        document.getElementById('answerInput').value = '';
        document.getElementById('feedback').textContent = '';
        document.getElementById('answerInput').focus();
        document.getElementById('submitAnswer').disabled = false;
      } else {
        // 모든 문제 완료
        document.getElementById('questionText').textContent = '모든 문제를 맞추셨습니다!';
        document.getElementById('submitAnswer').disabled = true;
      }
    }

    function checkAnswer() {
      const answerInput = document.getElementById('answerInput');
      const feedback = document.getElementById('feedback');
      const userAnswer = answerInput.value.trim();
      if (!userAnswer) return;
      const correctAnswer = currentQuestions[currentIndex].a;
      if (userAnswer === correctAnswer) {
        feedback.textContent = '정답!';
        playClapSound();
        currentIndex++;
        // 다음 문제로 전환
        setTimeout(showQuestion, 1000);
      } else {
        feedback.textContent = '틀렸습니다. 다시 시도해보세요.';
      }
    }

    let lastClapTime = 0;
    function playClapSound() {
      const now = Date.now();
      if (now - lastClapTime > 1500) {
        document.getElementById('clapSound').play();
        lastClapTime = now;
      }
    }
  </script>
</body>
</html>
